!function(s,t){"use strict";s.wc_serial_numbers_admin=function(){var e=this;e.init=function(){e.init_select2(".wc-serial-numbers-select-product","wc_serial_numbers_search_products",wc_serial_numbers_admin_i10n.i18n.search_product),e.init_datepicker(".wc-serial-numbers-select-date"),e.encrypt_decrypt()},e.init_select2=function(e,n,i){i=i||"Select..",s(e).select2({ajax:{cache:!0,delay:500,url:t.wc_serial_numbers_admin_i10n.ajaxurl,method:"POST",dataType:"json",data:function(e){return{action:n,nonce:t.wc_serial_numbers_admin_i10n.nonce,search:e.term,page:e.page}},processResults:function(e,n){return n.page=n.page||1,{results:e.results,pagination:{more:e.pagination.more}}}},placeholder:i,minimumInputLength:1,allowClear:!0})},e.init_datepicker=function(e){s(e).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",firstDay:7,minDate:new Date})},e.encrypt_decrypt=function(){s(document).on("click",".wc-serial-numbers-decrypt-key",function(e){e.preventDefault();var n=s(this),i=n.data("serial-id"),t=n.data("nonce")||null,e=n.closest("td"),a=e.find(".serial-key"),r=e.find(".serial-spinner");return r.show(),a.hasClass("encrypted")?wp.ajax.send("wc_serial_numbers_decrypt_key",{data:{serial_id:i,nonce:t},success:function(e){a.text(e.key),r.hide(),a.removeClass("encrypted"),n.text(wc_serial_numbers_admin_i10n.i18n.hide)},error:function(){r.hide(),a.text(""),a.addClass("encrypted"),n.text(wc_serial_numbers_admin_i10n.i18n.show),alert("Decrypting key failed")}}):(a.addClass("encrypted"),r.hide(),a.text(""),n.text(wc_serial_numbers_admin_i10n.i18n.show)),!1})},e.init()},s.fn.wc_serial_numbers_admin=function(){return new s.wc_serial_numbers_admin},s.wc_serial_numbers_admin()}(jQuery,window);